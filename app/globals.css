@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }
  
  body {
    @apply font-serif bg-cream text-charcoal antialiased;
    /* Add subtle noise texture via CSS gradient */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
  }

  /* RTL Support */
  html[dir="rtl"] body {
    @apply font-persian;
  }

  html[dir="rtl"] h1, 
  html[dir="rtl"] h2, 
  html[dir="rtl"] h3, 
  html[dir="rtl"] h4, 
  html[dir="rtl"] h5, 
  html[dir="rtl"] h6 {
    @apply font-persian font-bold tracking-normal;
  }

  /* Custom selection color */
  ::selection {
    @apply bg-burgundy/15 text-burgundy;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-bold text-charcoal tracking-tight;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Refined Fade In Animation */
  .fade-in {
    animation: fadeIn 1.0s cubic-bezier(0.22, 1, 0.36, 1) forwards; /* Custom easing */
    opacity: 0;
    filter: blur(0px);
  }
  
  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(15px);
      filter: blur(2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0px);
    }
  }
  
  /* Elegant Underline */
  .underline-slide {
    position: relative;
    text-decoration: none;
  }
  
  .underline-slide::after {
    content: '';
    position: absolute;
    width: 0;
    height: 1px;
    bottom: -2px;
    left: 0;
    background-color: currentColor;
    transition: width 0.4s cubic-bezier(0.22, 1, 0.36, 1);
  }
  
  .underline-slide:hover::after {
    width: 100%;
  }
  
  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-charcoal/20 hover:bg-charcoal/40 transition-colors;
  }
}

/* High-End Editorial Prose Styles */
.prose {
  @apply text-charcoal max-w-none;
}

.prose p {
  @apply text-lg md:text-xl leading-relaxed md:leading-[1.8] mb-6 md:mb-8 font-serif text-charcoal/90; /* Slightly muted for reading comfort */
}

html[dir="rtl"] .prose p {
  @apply font-persian leading-[2.0];
}

.prose h2 {
  @apply text-3xl md:text-4xl font-display font-bold mt-20 mb-8 tracking-tight text-charcoal leading-tight;
}

.prose h3 {
  @apply text-2xl md:text-3xl font-display font-semibold mt-16 mb-6 text-charcoal leading-tight;
}

.prose a {
  @apply text-burgundy underline underline-offset-4 decoration-1 decoration-burgundy/30 hover:decoration-burgundy transition-all;
}

.prose blockquote {
  @apply border-l-2 border-gold pl-8 italic my-12 text-2xl text-charcoal font-display bg-transparent leading-relaxed;
}

html[dir="rtl"] .prose blockquote {
  @apply border-l-0 border-r-2 pr-8 pl-0 font-persian;
}

.prose ul, .prose ol {
  @apply my-8 pl-6 space-y-3 marker:text-burgundy/70;
}

html[dir="rtl"] .prose ul, 
html[dir="rtl"] .prose ol {
  @apply pl-0 pr-6;
}

.prose li {
  @apply text-xl leading-relaxed pl-2;
}

html[dir="rtl"] .prose li {
  @apply pl-0 pr-2 font-persian;
}

.prose strong {
  @apply font-bold text-charcoal;
}

.prose code {
  @apply bg-sand px-1.5 py-0.5 text-base font-mono text-burgundy border border-charcoal/5;
}

.prose pre {
  @apply bg-charcoal text-cream p-8 overflow-x-auto my-12 text-sm border-l-2 border-gold shadow-2xl;
}

html[dir="rtl"] .prose pre {
  @apply border-l-0 border-r-2;
  direction: ltr;
  text-align: left;
}

.prose pre code {
  @apply bg-transparent p-0 text-cream border-none;
}

.prose img {
  @apply w-full h-auto my-16 block shadow-sm;
}

.prose hr {
  @apply my-20 border-0 h-px bg-charcoal/10;
}

/* Drop cap - Classical Style */
.prose > p:first-of-type::first-letter {
  @apply text-6xl md:text-7xl font-display font-bold float-left mr-4 mt-2 leading-none text-burgundy;
}

html[dir="rtl"] .prose > p:first-of-type::first-letter {
  @apply float-right ml-4 mr-0 font-persian;
}

/* Pull quotes utility */
.prose .pullquote {
  @apply text-3xl md:text-4xl font-display italic text-charcoal my-20 text-center leading-tight max-w-3xl mx-auto py-12 border-y border-charcoal/10;
}

html[dir="rtl"] .prose .pullquote {
  @apply font-persian font-bold not-italic;
}
